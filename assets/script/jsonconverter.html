<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    async function fetchAndConvertToJson() {
      const url = document.getElementById('url-input').value;

      try {
        // Fetch HTML content from the provided URL
        const response = await fetch(url);
        const htmlContent = await response.text();

        // Parse the HTML content into a DOM structure
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlContent, 'text/html');

        // Initialize a Map to hold the structured data
        let contentMap = new Map();
        let contentArray = [];

        // Extract headings and paragraphs
        const headings = doc.querySelectorAll('h1, h2, h3, h4, h5, h6');
        const paragraphs = doc.querySelectorAll('p');
        
        let currentIndex = 0;

        headings.forEach(heading => {
          // Retain all whitespace and new lines in the heading and paragraph content
          let headingText = heading.innerText.trim();
          let paragraphText = paragraphs[currentIndex] ? preserveWhitespace(paragraphs[currentIndex].innerHTML) : "";

          // Add the heading and text to both the Map and Array
          contentMap.set(headingText, paragraphText);
          contentArray.push({ heading: headingText, text: paragraphText });

          currentIndex++;
        });

        // If there are more paragraphs than headings, add the remaining paragraphs
        while (currentIndex < paragraphs.length) {
          const additionalHeading = "Additional Content";
          const additionalText = preserveWhitespace(paragraphs[currentIndex].innerHTML);

          contentMap.set(additionalHeading, additionalText);
          contentArray.push({ heading: additionalHeading, text: additionalText });

          currentIndex++;
        }

        // Display the Map and Array in the output section
        const mapJson = JSON.stringify(Object.fromEntries(contentMap), null, 2);
        const arrayJson = JSON.stringify(contentArray, null, 2);
        
        document.getElementById('json-output').innerHTML = `
          <strong>Content Map:</strong>
          <pre>${mapJson}</pre>
          
          <strong>Content Array:</strong>
          <pre>${arrayJson}</pre>
        `;

      } catch (error) {
        console.error('Error fetching or processing HTML:', error);
        alert('Failed to fetch content from the URL');
      }
    }

    // Function to preserve whitespace and new lines in text
    function preserveWhitespace(html) {
      // Replace all spaces, newlines, and tabs with their corresponding HTML entities
      return html.replace(/(\r\n|\n|\r|\t)/g, ' ').replace(/\s+/g, ' ').trim();
    }

  </script>
</head>
<body>
  <h1>Website Content to Map and Array Converter</h1>
  
  <label for="url-input">Enter Website URL:</label>
  <input type="text" id="url-input" placeholder="https://example.com" size="50">
  <button onclick="fetchAndConvertToJson()">Convert Website to Map and Array</button>

  <h2>Output:</h2>
  <div id="json-output"></div> <!-- Display the Map and Array output -->

</body>
</html>
